"use strict";

module.exports = function (err) {
  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var message = typeof err === 'string' ? err : err.message;

  if (!message) {
    message = 'Unknown error';
  }

  if (err.fileName) {
    var fileName = err.fileName;

    if (err.loc) {
      fileName += ":".concat(err.loc.line, ":").concat(err.loc.column);
    }

    message = "".concat(fileName, ": ").concat(message);
  }

  var stack;

  if (err.codeFrame) {
    stack = opts.color && err.highlightedCodeFrame || err.codeFrame;
  } else if (err.stack) {
    stack = err.stack.slice(err.stack.indexOf('\n') + 1);
  }

  return {
    message: message,
    stack: stack
  };
};